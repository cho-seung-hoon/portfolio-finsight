<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finsight.backend.mapper.UserMapper">
    <insert id="insert" parameterType="User">
        INSERT INTO User (
            user_id, user_name, user_password,
            user_birthday, user_email
        ) VALUES (
                     #{userId}, #{userName}, #{userPassword},
                     #{userBirthday}, #{userEmail}
                 )
    </insert>
    <select id="findUserByUserId" resultType="User">
        select * from User
        where user_id = #{userId}
    </select>
    <select id="existsByUserId" resultType="Boolean">
        select exists(
            select 1
            from User
            where user_id = #{userId}
        )
    </select>
    <select id="existsByEmail" resultType="Boolean">
        select exists(
            select 1
            from User
            where user_email = #{userEmail}
        )
    </select>
    <update id="updateUserRoleToComplete" parameterType="string">
        UPDATE User
        SET user_role = 'complete'
        WHERE user_id = #{userId}
    </update>
    <delete id="deleteUser" parameterType="string">
        DELETE FROM User
               WHERE user_id = #{userId}
    </delete>
</mapper>